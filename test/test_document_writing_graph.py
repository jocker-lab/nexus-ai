# -*- coding: utf-8 -*-
"""
@File    :   test_document_writing_graph.py
@Time    :   2025/11/18 10:15
@Author  :   pygao
@Version :   1.0
@Contact :   pygao.1@outlook.com
@License :   (C)Copyright 2025, GienTech Technology Co.,Ltd. All rights reserved.
@Desc    :   Document Writing Graph å®Œæ•´æµ‹è¯•
"""

import asyncio
from loguru import logger

from app.agents.schemas.document_outline_schema import DocumentOutline, Section, SubSection
from app.agents.core.publisher.writing.agent import create_main_graph
from app.agents.core.publisher.writing.state import DocumentState
from dotenv import load_dotenv

load_dotenv()


# ========== æµ‹è¯•æ•°æ® ==========

document_outline = DocumentOutline(
    title="2025å¹´ç¬¬ä¸€å­£åº¦ä¸­åŸé“¶è¡Œé£é™©åˆ†ææŠ¥å‘Š",
    language="zh",
    target_audience="å…¬å¸é«˜ç®¡å±‚ã€è‘£äº‹ä¼šæˆå‘˜ã€é£é™©ç®¡ç†å§”å‘˜ä¼šã€ç›‘ç®¡æœºæ„",
    writing_style="business",
    writing_tone="authoritative",
    writing_purpose="å…¨é¢è¯„ä¼°ä¸­åŸé“¶è¡Œ2025å¹´ç¬¬ä¸€å­£åº¦çš„ç»è¥çŠ¶å†µä¸é£é™©æ°´å¹³ï¼Œä¸ºç®¡ç†å†³ç­–æä¾›ä¾æ®ï¼Œå¹¶å‘ç›‘ç®¡éƒ¨é—¨å±•ç¤ºåˆè§„ç»è¥æƒ…å†µ",
    key_themes=[
        "å®è§‚ç»æµä¸ç›‘ç®¡æ”¿ç­–ç¯å¢ƒåˆ†æ",
        "ç»è¥ä¸šç»©ä¸ä¸šåŠ¡å‘å±•è¯„ä¼°",
        "å¤šç»´åº¦é£é™©è¯†åˆ«ä¸è®¡é‡",
        "èµ„æœ¬å……è¶³ä¸æµåŠ¨æ€§ç®¡ç†",
        "æˆ˜ç•¥æ‰§è¡Œä¸é£é™©ç®¡æ§å»ºè®®",
    ],
    estimated_total_words=12000,
    sections=[
        Section(
            title="ä¸€ã€å¤–éƒ¨ç¯å¢ƒåˆ†æ",
            description="åˆ†æ2025å¹´ç¬¬ä¸€å­£åº¦å½±å“é“¶è¡Œç»è¥çš„å¤–éƒ¨å®è§‚ç¯å¢ƒï¼ŒåŒ…æ‹¬å®è§‚ç»æµå½¢åŠ¿ã€ç›‘ç®¡æ”¿ç­–å˜åŒ–å’Œè¡Œä¸šå‘å±•è¶‹åŠ¿",
            writing_guidance="é‡‡ç”¨'ç¯å¢ƒæ‰«æ-å½±å“è¯„ä¼°'çš„ç»“æ„ï¼Œå…ˆé˜è¿°å¤–éƒ¨ç¯å¢ƒå˜åŒ–ï¼Œå†åˆ†æå¯¹é“¶è¡Œä¸šåŠ¡çš„å…·ä½“å½±å“ã€‚éœ€ä½“ç°å‰ç»æ€§å’Œé£é™©å¯¼å‘ã€‚",
            content_requirements="éœ€è¦åŒ…å«ï¼š1) å®è§‚ç»æµè¿è¡Œæ€åŠ¿åŠå¯¹é“¶è¡Œä¸šçš„å½±å“ 2) æŠ¥å‘ŠæœŸå†…é‡è¦ç›‘ç®¡æ”¿ç­–çš„å…·ä½“å†…å®¹ 3) åŒºåŸŸç»æµä¸æ²³å—çœç»æµå‘å±•æƒ…å†µ 4) åŸå•†è¡Œè¡Œä¸šç«äº‰æ ¼å±€å˜åŒ–",
            visual_elements=False,
            estimated_words=2500,
            writing_priority="high",
            subsections=[
                SubSection(
                    sub_section_title="ï¼ˆä¸€ï¼‰å®è§‚ç»æµå½¢åŠ¿",
                    description="åˆ†æ2025å¹´ç¬¬ä¸€å­£åº¦å›½å†…å¤–å®è§‚ç»æµè¿è¡Œæ€åŠ¿åŠå…¶å¯¹é“¶è¡Œä¸šçš„å½±å“",
                    writing_guidance="""
                    ã€æ®µè½1 - å›½å†…ç»æµå½¢åŠ¿ã€‘(200-250å­—)
                    - æ¦‚è¿°2025å¹´ç¬¬ä¸€å­£åº¦GDPå¢é€Ÿã€å·¥ä¸šç”Ÿäº§ã€æ¶ˆè´¹æŠ•èµ„ç­‰ä¸»è¦ç»æµæŒ‡æ ‡
                    - åˆ†æè´§å¸æ”¿ç­–å–å‘ï¼ˆåˆ©ç‡ã€å­˜æ¬¾å‡†å¤‡é‡‘ç‡å˜åŒ–ç­‰ï¼‰
                    - è¯´æ˜ç»æµå¤è‹æ€åŠ¿å¯¹é“¶è¡Œèµ„äº§è´¨é‡å’Œä¿¡è´·éœ€æ±‚çš„å½±å“

                    ã€æ®µè½2 - åŒºåŸŸç»æµç¯å¢ƒã€‘(200-250å­—)
                    - åˆ†ææ²³å—çœç»æµè¿è¡Œæƒ…å†µå’Œä¸»è¦äº§ä¸šå‘å±•æ€åŠ¿
                    - å…³æ³¨æˆ¿åœ°äº§å¸‚åœºã€åœ°æ–¹æ”¿åºœå€ºåŠ¡ç­‰é‡ç‚¹é¢†åŸŸå˜åŒ–
                    - è¯„ä¼°åŒºåŸŸç»æµç¯å¢ƒå¯¹æœ¬è¡Œä¸šåŠ¡å‘å±•çš„æœºé‡ä¸æŒ‘æˆ˜

                    ã€æ®µè½3 - åˆ©ç‡æ±‡ç‡ç¯å¢ƒã€‘(150-200å­—)
                    - åˆ†æå¸‚åœºåˆ©ç‡èµ°åŠ¿å¯¹å‡€æ¯å·®çš„å½±å“
                    - è¯´æ˜LPRå˜åŠ¨å¯¹è´·æ¬¾å®šä»·çš„å½±å“
                    - è¯„ä¼°åˆ©ç‡å¸‚åœºåŒ–æ·±åŒ–å¯¹é“¶è¡Œç›ˆåˆ©æ¨¡å¼çš„æŒ‘æˆ˜
                    """,
                    estimated_word_count=650
                ),
                SubSection(
                    sub_section_title="ï¼ˆäºŒï¼‰ç›‘ç®¡æ”¿ç­–åŠ¨æ€",
                    description="æ¢³ç†æŠ¥å‘ŠæœŸå†…å¯¹åŸå¸‚å•†ä¸šé“¶è¡Œå…·æœ‰é‡å¤§å½±å“çš„ç›‘ç®¡æ”¿ç­–",
                    writing_guidance="""
                    ã€æ®µè½1 - é‡‘èç›‘ç®¡æ€»ä½“å¯¼å‘ã€‘(200-250å­—)
                    - æ¦‚è¿°é‡‘èç›‘ç®¡æ€»å±€å¯¹ä¸­å°é“¶è¡Œçš„ç›‘ç®¡é‡ç‚¹
                    - è¯´æ˜é˜²èŒƒåŒ–è§£é‡‘èé£é™©çš„æ”¿ç­–è¦æ±‚
                    - åˆ†æå¯¹åŸå•†è¡Œå›å½’æœ¬æºã€æœåŠ¡å®ä½“çš„ç›‘ç®¡å¯¼å‘

                    ã€æ®µè½2 - èµ„æœ¬ä¸é£é™©ç›‘ç®¡è¦æ±‚ã€‘(200-250å­—)
                    - è§£è¯»èµ„æœ¬å……è¶³ç‡ã€æµåŠ¨æ€§ç­‰ç›‘ç®¡æŒ‡æ ‡çš„æ–°è¦æ±‚
                    - åˆ†æä¸è‰¯è´·æ¬¾è®¤å®šã€æ‹¨å¤‡è®¡æç­‰æ”¿ç­–å˜åŒ–
                    - è¯´æ˜ç›‘ç®¡æ”¿ç­–å¯¹æœ¬è¡Œèµ„æœ¬è§„åˆ’å’Œé£é™©ç®¡ç†çš„å½±å“

                    ã€æ®µè½3 - ä¸šåŠ¡é¢†åŸŸç›‘ç®¡æ”¿ç­–ã€‘(200-250å­—)
                    - æ¢³ç†æˆ¿åœ°äº§é‡‘èã€æ™®æƒ é‡‘èã€ç»¿è‰²é‡‘èç­‰é¢†åŸŸæ”¿ç­–
                    - åˆ†æåœ°æ–¹æ”¿åºœå€ºåŠ¡åŒ–è§£ç›¸å…³æ”¿ç­–å¯¹æœ¬è¡Œçš„å½±å“
                    - è¯´æ˜é‡‘èç§‘æŠ€ã€æ•°æ®æ²»ç†ç­‰æ–°å…´é¢†åŸŸç›‘ç®¡è¦æ±‚
                    """,
                    estimated_word_count=700
                ),
                SubSection(
                    sub_section_title="ï¼ˆä¸‰ï¼‰è¡Œä¸šç«äº‰æ ¼å±€",
                    description="åˆ†æåŸå¸‚å•†ä¸šé“¶è¡Œè¡Œä¸šçš„ç«äº‰æ€åŠ¿å’Œå‘å±•è¶‹åŠ¿",
                    writing_guidance="""
                    ã€æ®µè½1 - è¡Œä¸šæ•´ä½“æ€åŠ¿ã€‘(200-250å­—)
                    - æè¿°åŸå•†è¡Œè¡Œä¸šçš„æ•´ä½“ç»è¥çŠ¶å†µ
                    - åˆ†æå‡€æ¯å·®æ”¶çª„ã€èµ„äº§è´¨é‡æ‰¿å‹ç­‰å…±æ€§æŒ‘æˆ˜
                    - è¯´æ˜å·®å¼‚åŒ–ç«äº‰å’Œç‰¹è‰²åŒ–ç»è¥çš„è¡Œä¸šè¶‹åŠ¿

                    ã€æ®µè½2 - ç«äº‰æ ¼å±€å˜åŒ–ã€‘(200-250å­—)
                    - åˆ†æå…¨å›½æ€§é“¶è¡Œä¸‹æ²‰å¸¦æ¥çš„ç«äº‰å‹åŠ›
                    - è¯´æ˜å¤´éƒ¨åŸå•†è¡Œä¸ä¸­å°åŸå•†è¡Œçš„åˆ†åŒ–è¶‹åŠ¿
                    - è¯„ä¼°é‡‘èç§‘æŠ€å‘å±•å¯¹ç«äº‰æ ¼å±€çš„é‡å¡‘

                    ã€æ®µè½3 - æœ¬è¡Œç«äº‰å®šä½ã€‘(150-200å­—)
                    - æ˜ç¡®æœ¬è¡Œåœ¨æ²³å—çœé‡‘èå¸‚åœºçš„å®šä½
                    - åˆ†æ"å››ä¸ªé“¶è¡Œ"æˆ˜ç•¥çš„å·®å¼‚åŒ–ä¼˜åŠ¿
                    - æŒ‡å‡ºé¢ä¸´çš„ä¸»è¦ç«äº‰æŒ‘æˆ˜
                    """,
                    estimated_word_count=600
                ),
            ]
        ),

        Section(
            title="äºŒã€æŠ¥å‘ŠæœŸå†…ç»è¥æƒ…å†µåˆ†æ",
            description="è¯¦ç»†åˆ†æé“¶è¡Œ2025å¹´ç¬¬ä¸€å­£åº¦çš„ç»è¥æŒ‡æ ‡ã€ä¸šåŠ¡å‘å±•æƒ…å†µå’Œä¸åŒä¸šå¯¹æ ‡æƒ…å†µ",
            writing_guidance="é‡‡ç”¨'æ€»ä½“å›é¡¾-åˆ†é¡¹åˆ†æ-å¯¹æ ‡è¯„ä»·'çš„é€’è¿›ç»“æ„ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½éœ€è¦æœ‰æ•°æ®æ”¯æ’‘ï¼Œå…³é”®æŒ‡æ ‡åº”é…åˆå¯è§†åŒ–å›¾è¡¨å¢å¼ºè¯´æœåŠ›ã€‚",
            content_requirements="éœ€è¦åŒ…å«ï¼š1) å…³é”®è´¢åŠ¡æŒ‡æ ‡åŠåŒæ¯”ç¯æ¯”å˜åŒ– 2) èµ„äº§è´Ÿå€ºä¸šåŠ¡å‘å±•æ•°æ® 3) æ”¶å…¥åˆ©æ¶¦æ„æˆåˆ†æ 4) ä¸å¯æ¯”åŸå•†è¡Œçš„æ’åå¯¹æ¯”",
            visual_elements=True,
            estimated_words=2800,
            writing_priority="high",
            subsections=[
                SubSection(
                    sub_section_title="ï¼ˆä¸€ï¼‰ä¸»è¦ç»è¥æŒ‡æ ‡å›é¡¾",
                    description="æ¦‚è¿°é“¶è¡ŒæŠ¥å‘ŠæœŸå†…çš„æ ¸å¿ƒè´¢åŠ¡è¡¨ç°",
                    writing_guidance="""
                    ã€æ®µè½1 - è§„æ¨¡æŒ‡æ ‡ã€‘(200-250å­—)
                    - ç»™å‡ºæ€»èµ„äº§ã€æ€»è´Ÿå€ºã€æ‰€æœ‰è€…æƒç›Šç­‰è§„æ¨¡æŒ‡æ ‡
                    - è¯´æ˜ä¸ä¸Šå­£æœ«ã€ä¸Šå¹´åŒæœŸç›¸æ¯”çš„å˜åŒ–æƒ…å†µ
                    - åˆ†æèµ„äº§è§„æ¨¡å¢é•¿çš„é©±åŠ¨å› ç´ 

                    ã€æ®µè½2 - ç›ˆåˆ©æŒ‡æ ‡ã€‘(200-250å­—)
                    - ç»™å‡ºè¥ä¸šæ”¶å…¥ã€å‡€åˆ©æ¶¦ã€å½’æ¯å‡€åˆ©æ¶¦ç­‰ç›ˆåˆ©æŒ‡æ ‡
                    - åˆ†ææ”¶å…¥åˆ©æ¶¦åŒæ¯”ç¯æ¯”å˜åŒ–åŠåŸå› 
                    - è¯´æ˜å‡€æ¯å·®ã€æˆæœ¬æ”¶å…¥æ¯”ç­‰æ•ˆç‡æŒ‡æ ‡å˜åŒ–

                    ã€æ®µè½3 - é£é™©æŒ‡æ ‡ã€‘(200-250å­—)
                    - ç»™å‡ºä¸è‰¯è´·æ¬¾ç‡ã€æ‹¨å¤‡è¦†ç›–ç‡ã€èµ„æœ¬å……è¶³ç‡ç­‰é£é™©æŒ‡æ ‡
                    - åˆ†æå„æŒ‡æ ‡çš„å˜åŒ–è¶‹åŠ¿
                    - è¯„ä¼°é£é™©æŠµè¡¥èƒ½åŠ›çš„å……è¶³æ€§

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®ä¸»è¦ç»è¥æŒ‡æ ‡å˜åŒ–è¶‹åŠ¿å›¾
                    - å»ºè®®é…ç½®èµ„äº§ç»“æ„é¥¼å›¾
                    """,
                    estimated_word_count=700
                ),
                SubSection(
                    sub_section_title="ï¼ˆäºŒï¼‰èµ„äº§ä¸šåŠ¡åˆ†æ",
                    description="åˆ†æè´·æ¬¾ä¸šåŠ¡ã€æŠ•èµ„ä¸šåŠ¡ç­‰èµ„äº§ç«¯çš„ç»“æ„å’Œå˜åŒ–",
                    writing_guidance="""
                    ã€æ®µè½1 - è´·æ¬¾ä¸šåŠ¡ã€‘(300-350å­—)
                    - ç»™å‡ºè´·æ¬¾æ€»é¢ã€æ–°å¢æŠ•æ”¾ã€è¡Œä¸šåˆ†å¸ƒç­‰æ•°æ®
                    - åˆ†æå…¬å¸è´·æ¬¾ä¸é›¶å”®è´·æ¬¾çš„ç»“æ„å˜åŒ–
                    - è¯´æ˜é‡ç‚¹é¢†åŸŸï¼ˆæ™®æƒ å°å¾®ã€åˆ¶é€ ä¸šã€ç§‘æŠ€é‡‘èç­‰ï¼‰æŠ•æ”¾æƒ…å†µ
                    - åˆ†æè´·æ¬¾å®šä»·å’Œæ”¶ç›Šç‡å˜åŒ–

                    ã€æ®µè½2 - æŠ•èµ„ä¸šåŠ¡ã€‘(200-250å­—)
                    - ç»™å‡ºæŠ•èµ„è¯åˆ¸åŠå…¶ä»–é‡‘èèµ„äº§è§„æ¨¡å’Œç»“æ„
                    - åˆ†æå€ºåˆ¸æŠ•èµ„ã€åŸºé‡‘æŠ•èµ„ç­‰å„ç±»æŠ•èµ„çš„å æ¯”å˜åŒ–
                    - è¯´æ˜æŠ•èµ„æ”¶ç›Šç‡å’Œé£é™©æ•å£æƒ…å†µ

                    ã€æ®µè½3 - åŒä¸šèµ„äº§ã€‘(150-200å­—)
                    - ç»™å‡ºåŒä¸šå¾€æ¥èµ„äº§è§„æ¨¡
                    - åˆ†æåŒä¸šèµ„äº§çš„æœŸé™ç»“æ„å’Œäº¤æ˜“å¯¹æ‰‹åˆ†å¸ƒ

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®è´·æ¬¾è¡Œä¸šåˆ†å¸ƒå›¾
                    - å»ºè®®é…ç½®è´·æ¬¾æ”¶ç›Šç‡å˜åŒ–è¶‹åŠ¿å›¾
                    """,
                    estimated_word_count=750
                ),
                SubSection(
                    sub_section_title="ï¼ˆä¸‰ï¼‰è´Ÿå€ºä¸šåŠ¡åˆ†æ",
                    description="åˆ†æå­˜æ¬¾ä¸šåŠ¡ã€åŒä¸šè´Ÿå€ºç­‰è´Ÿå€ºç«¯çš„ç»“æ„å’Œæˆæœ¬",
                    writing_guidance="""
                    ã€æ®µè½1 - å­˜æ¬¾ä¸šåŠ¡ã€‘(250-300å­—)
                    - ç»™å‡ºå­˜æ¬¾æ€»é¢ã€æ–°å¢å­˜æ¬¾ã€å­˜æ¬¾ç»“æ„ç­‰æ•°æ®
                    - åˆ†æå¯¹å…¬å­˜æ¬¾ä¸é›¶å”®å­˜æ¬¾çš„å æ¯”å˜åŒ–
                    - è¯´æ˜æ´»æœŸå­˜æ¬¾ä¸å®šæœŸå­˜æ¬¾çš„ç»“æ„å˜åŒ–
                    - åˆ†æå­˜æ¬¾æˆæœ¬ç‡å˜åŒ–è¶‹åŠ¿

                    ã€æ®µè½2 - ä¸»åŠ¨è´Ÿå€ºã€‘(200-250å­—)
                    - ç»™å‡ºåŒä¸šè´Ÿå€ºã€å‘è¡Œå€ºåˆ¸ç­‰ä¸»åŠ¨è´Ÿå€ºè§„æ¨¡
                    - åˆ†æèèµ„æ¸ é“å¤šå…ƒåŒ–æƒ…å†µ
                    - è¯´æ˜è´Ÿå€ºæˆæœ¬æ§åˆ¶æªæ–½å’Œæ•ˆæœ

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®å­˜æ¬¾ç»“æ„å˜åŒ–å›¾
                    - å»ºè®®é…ç½®è´Ÿå€ºæˆæœ¬ç‡è¶‹åŠ¿å›¾
                    """,
                    estimated_word_count=550
                ),
                SubSection(
                    sub_section_title="ï¼ˆå››ï¼‰æ”¶å…¥åˆ©æ¶¦åˆ†æ",
                    description="åˆ†æè¥ä¸šæ”¶å…¥æ„æˆå’Œåˆ©æ¶¦å½¢æˆè¿‡ç¨‹",
                    writing_guidance="""
                    ã€æ®µè½1 - æ”¶å…¥ç»“æ„ã€‘(200-250å­—)
                    - åˆ†æåˆ©æ¯å‡€æ”¶å…¥ã€éåˆ©æ¯æ”¶å…¥çš„å æ¯”å˜åŒ–
                    - è¯´æ˜æ‰‹ç»­è´¹åŠä½£é‡‘æ”¶å…¥çš„å¢é•¿æƒ…å†µ
                    - åˆ†ææŠ•èµ„æ”¶ç›Šç­‰å…¶ä»–æ”¶å…¥æ¥æº

                    ã€æ®µè½2 - æˆæœ¬è´¹ç”¨ã€‘(150-200å­—)
                    - åˆ†æä¸šåŠ¡åŠç®¡ç†è´¹ç”¨çš„æ§åˆ¶æƒ…å†µ
                    - è¯´æ˜ä¿¡ç”¨å‡å€¼æŸå¤±çš„è®¡ææƒ…å†µ
                    - åˆ†ææˆæœ¬æ”¶å…¥æ¯”çš„å˜åŒ–è¶‹åŠ¿

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®æ”¶å…¥æ„æˆå˜åŒ–å›¾
                    """,
                    estimated_word_count=450
                ),
                SubSection(
                    sub_section_title="ï¼ˆäº”ï¼‰ä¸åŒä¸šå¯¹æ ‡åˆ†æ",
                    description="ä¸å¯æ¯”åŸå•†è¡Œè¿›è¡Œå¤šç»´åº¦å¯¹æ ‡æ¯”è¾ƒ",
                    writing_guidance="""
                    ã€æ®µè½1 - å¯¹æ ‡æ–¹æ³•è¯´æ˜ã€‘(100-150å­—)
                    - è¯´æ˜å¯æ¯”é“¶è¡Œçš„é€‰æ‹©æ ‡å‡†ï¼ˆèµ„äº§è§„æ¨¡ç›¸è¿‘çš„åŸå•†è¡Œï¼‰
                    - åˆ—æ˜å¯¹æ ‡æŒ‡æ ‡ä½“ç³»çš„ç»´åº¦

                    ã€æ®µè½2 - å¯¹æ ‡ç»“æœã€‘(200-250å­—)
                    - ä»¥è¡¨æ ¼å½¢å¼å‘ˆç°å„æŒ‡æ ‡çš„æ’åæƒ…å†µ
                    - é‡ç‚¹å¯¹æ¯”èµ„äº§è§„æ¨¡ã€ç›ˆåˆ©èƒ½åŠ›ã€èµ„äº§è´¨é‡ã€èµ„æœ¬å……è¶³ç­‰ç»´åº¦
                    - è¯´æ˜æœ¬è¡Œåœ¨å¯æ¯”é“¶è¡Œä¸­çš„ç›¸å¯¹ä½ç½®

                    ã€æ®µè½3 - åˆ†æç»“è®ºã€‘(150-200å­—)
                    - æ€»ç»“æœ¬è¡Œçš„ç«äº‰ä¼˜åŠ¿å’ŒçŸ­æ¿
                    - åˆ†æç›¸å¯¹ç«äº‰åœ°ä½çš„å˜åŒ–è¶‹åŠ¿
                    """,
                    estimated_word_count=500
                ),
            ]
        ),

        Section(
            title="ä¸‰ã€ä¿¡ç”¨é£é™©åˆ†æ",
            description="å…¨é¢åˆ†æé“¶è¡Œä¿¡è´·èµ„äº§çš„ä¿¡ç”¨é£é™©çŠ¶å†µï¼ŒåŒ…æ‹¬èµ„äº§è´¨é‡ã€é›†ä¸­åº¦é£é™©å’Œé‡ç‚¹é¢†åŸŸé£é™©",
            writing_guidance="é‡‡ç”¨'æ•´ä½“è¯„ä¼°-ç»“æ„åˆ†æ-é‡ç‚¹å…³æ³¨'çš„åˆ†ææ¡†æ¶ã€‚éœ€è¦æœ‰è¯¦å®çš„æ•°æ®æ”¯æ’‘ï¼Œå¯¹é‡ç‚¹é£é™©é¢†åŸŸè¿›è¡Œæ·±å…¥åˆ†æã€‚",
            content_requirements="éœ€è¦åŒ…å«ï¼š1) ä¸è‰¯è´·æ¬¾å’Œå…³æ³¨ç±»è´·æ¬¾æƒ…å†µ 2) è¡Œä¸šå’Œå®¢æˆ·é›†ä¸­åº¦åˆ†æ 3) æˆ¿åœ°äº§ã€åœ°æ–¹èèµ„å¹³å°ç­‰é‡ç‚¹é¢†åŸŸé£é™© 4) ä¿¡ç”¨é£é™©ç®¡ç†æªæ–½",
            visual_elements=True,
            estimated_words=2200,
            writing_priority="high",
            subsections=[
                SubSection(
                    sub_section_title="ï¼ˆä¸€ï¼‰èµ„äº§è´¨é‡æ€»ä½“æƒ…å†µ",
                    description="è¯„ä¼°è´·æ¬¾èµ„äº§è´¨é‡çš„æ•´ä½“çŠ¶å†µå’Œå˜åŒ–è¶‹åŠ¿",
                    writing_guidance="""
                    ã€æ®µè½1 - äº”çº§åˆ†ç±»æƒ…å†µã€‘(250-300å­—)
                    - ç»™å‡ºæ­£å¸¸ã€å…³æ³¨ã€æ¬¡çº§ã€å¯ç–‘ã€æŸå¤±å„ç±»è´·æ¬¾å æ¯”
                    - åˆ†æä¸è‰¯è´·æ¬¾ä½™é¢å’Œä¸è‰¯è´·æ¬¾ç‡çš„å˜åŒ–
                    - è¯´æ˜å…³æ³¨ç±»è´·æ¬¾çš„å˜åŠ¨åŠè¿å¾™æƒ…å†µ
                    - åˆ†æé€¾æœŸè´·æ¬¾ä¸ä¸è‰¯è´·æ¬¾çš„å‰ªåˆ€å·®

                    ã€æ®µè½2 - æ‹¨å¤‡è®¡ææƒ…å†µã€‘(200-250å­—)
                    - ç»™å‡ºè´·æ¬¾æŸå¤±å‡†å¤‡ä½™é¢å’Œæ‹¨å¤‡è¦†ç›–ç‡
                    - åˆ†ææ‹¨è´·æ¯”å’Œä¿¡è´·æˆæœ¬çš„å˜åŒ–
                    - è¯„ä¼°é£é™©æŠµè¡¥èƒ½åŠ›çš„å……è¶³æ€§

                    ã€æ®µè½3 - ä¸è‰¯å¤„ç½®æƒ…å†µã€‘(150-200å­—)
                    - è¯´æ˜æŠ¥å‘ŠæœŸå†…ä¸è‰¯è´·æ¬¾æ ¸é”€ã€è½¬è®©ã€æ¸…æ”¶ç­‰å¤„ç½®æƒ…å†µ
                    - åˆ†æä¸è‰¯ç”Ÿæˆç‡å’Œå¤„ç½®ç‡çš„åŒ¹é…æƒ…å†µ

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®è´·æ¬¾äº”çº§åˆ†ç±»ç»“æ„å›¾
                    - å»ºè®®é…ç½®ä¸è‰¯è´·æ¬¾ç‡å’Œæ‹¨å¤‡è¦†ç›–ç‡è¶‹åŠ¿å›¾
                    """,
                    estimated_word_count=700
                ),
                SubSection(
                    sub_section_title="ï¼ˆäºŒï¼‰é›†ä¸­åº¦é£é™©åˆ†æ",
                    description="åˆ†æè´·æ¬¾çš„è¡Œä¸šé›†ä¸­åº¦å’Œå®¢æˆ·é›†ä¸­åº¦é£é™©",
                    writing_guidance="""
                    ã€æ®µè½1 - è¡Œä¸šé›†ä¸­åº¦ã€‘(250-300å­—)
                    - ç»™å‡ºå‰äº”å¤§è¡Œä¸šè´·æ¬¾å æ¯”åŠå˜åŒ–
                    - åˆ†æå„ä¸»è¦è¡Œä¸šçš„ä¸è‰¯ç‡æƒ…å†µ
                    - è¯†åˆ«é«˜é£é™©è¡Œä¸šå’Œè¡Œä¸šé›†ä¸­åº¦é£é™©

                    ã€æ®µè½2 - å®¢æˆ·é›†ä¸­åº¦ã€‘(200-250å­—)
                    - ç»™å‡ºæœ€å¤§å•ä¸€å€Ÿæ¬¾äººã€åå¤§å€Ÿæ¬¾äººè´·æ¬¾é›†ä¸­åº¦
                    - åˆ†æé›†ä¸­åº¦æŒ‡æ ‡ä¸ç›‘ç®¡é™é¢çš„æ¯”è¾ƒ
                    - è¯´æ˜å¤§é¢é£é™©æ•å£ç®¡ç†æªæ–½

                    ã€æ®µè½3 - åŒºåŸŸé›†ä¸­åº¦ã€‘(150-200å­—)
                    - åˆ†æè´·æ¬¾çš„åœ°åŸŸåˆ†å¸ƒæƒ…å†µ
                    - è¯„ä¼°åŒºåŸŸç»æµé£é™©å¯¹èµ„äº§è´¨é‡çš„å½±å“
                    """,
                    estimated_word_count=650
                ),
                SubSection(
                    sub_section_title="ï¼ˆä¸‰ï¼‰é‡ç‚¹é¢†åŸŸé£é™©åˆ†æ",
                    description="æ·±å…¥åˆ†ææˆ¿åœ°äº§ã€åœ°æ–¹èèµ„å¹³å°ç­‰é‡ç‚¹é£é™©é¢†åŸŸ",
                    writing_guidance="""
                    ã€æ®µè½1 - æˆ¿åœ°äº§é¢†åŸŸé£é™©ã€‘(300-350å­—)
                    - ç»™å‡ºæˆ¿åœ°äº§è´·æ¬¾ï¼ˆåŒ…æ‹¬å¼€å‘è´·ã€æŒ‰æ­è´·æ¬¾ï¼‰è§„æ¨¡å’Œå æ¯”
                    - åˆ†ææˆ¿åœ°äº§è¡Œä¸šä¸è‰¯ç‡å’Œé£é™©æ•å£å˜åŒ–
                    - è¯´æ˜æ¶‰åŠå‡ºé™©æˆ¿ä¼çš„é£é™©å¤„ç½®è¿›å±•
                    - è¯„ä¼°æˆ¿åœ°äº§å¸‚åœºæ³¢åŠ¨å¯¹æœ¬è¡Œçš„å½±å“

                    ã€æ®µè½2 - åœ°æ–¹æ”¿åºœèèµ„å¹³å°é£é™©ã€‘(250-300å­—)
                    - ç»™å‡ºåœ°æ–¹èèµ„å¹³å°è´·æ¬¾è§„æ¨¡å’Œå æ¯”
                    - åˆ†æå¹³å°ç±»è´·æ¬¾çš„æœŸé™ç»“æ„å’Œè¿˜æ¬¾æ¥æº
                    - è¯´æ˜é…åˆåœ°æ–¹æ”¿åºœåŒ–å€ºçš„æƒ…å†µ
                    - è¯„ä¼°å¹³å°ç±»è´·æ¬¾çš„æ•´ä½“é£é™©æ°´å¹³

                    ã€æ®µè½3 - å…¶ä»–é‡ç‚¹é¢†åŸŸã€‘(150-200å­—)
                    - åˆ†æå†œæ—ç‰§æ¸”ç­‰å‘¨æœŸæ€§è¡Œä¸šçš„é£é™©æƒ…å†µ
                    - å…³æ³¨ä¸­å°å¾®ä¼ä¸šã€ä¸ªäººç»è¥æ€§è´·æ¬¾çš„èµ„äº§è´¨é‡
                    - è¯´æ˜ä¿¡ç”¨å¡ã€æ¶ˆè´¹è´·ç­‰é›¶å”®è´·æ¬¾çš„é£é™©å˜åŒ–
                    """,
                    estimated_word_count=750
                ),
            ]
        ),

        Section(
            title="å››ã€å¸‚åœºé£é™©ä¸æµåŠ¨æ€§é£é™©åˆ†æ",
            description="è¯„ä¼°é“¶è¡Œé¢ä¸´çš„åˆ©ç‡é£é™©ã€äº¤æ˜“è´¦æˆ·é£é™©å’ŒæµåŠ¨æ€§é£é™©çŠ¶å†µ",
            writing_guidance="é‡‡ç”¨é‡åŒ–åˆ†æä¸å®šæ€§è¯„ä¼°ç›¸ç»“åˆçš„æ–¹æ³•ï¼Œé‡ç‚¹å…³æ³¨é£é™©æ•å£å’Œç®¡ç†æªæ–½çš„æœ‰æ•ˆæ€§ã€‚",
            content_requirements="éœ€è¦åŒ…å«ï¼š1) åˆ©ç‡é£é™©æ•æ„Ÿæ€§åˆ†æ 2) äº¤æ˜“è´¦æˆ·å¸‚åœºé£é™©æ•å£ 3) æµåŠ¨æ€§è¦†ç›–ç‡ç­‰ç›‘ç®¡æŒ‡æ ‡ 4) èèµ„æ¸ é“å’ŒæµåŠ¨æ€§å‚¨å¤‡æƒ…å†µ",
            visual_elements=True,
            estimated_words=1500,
            writing_priority="medium",
            subsections=[
                SubSection(
                    sub_section_title="ï¼ˆä¸€ï¼‰åˆ©ç‡é£é™©",
                    description="è¯„ä¼°é“¶è¡Œè´¦æˆ·çš„åˆ©ç‡é£é™©æ•å£",
                    writing_guidance="""
                    ã€æ®µè½1 - åˆ©ç‡æ•æ„Ÿæ€§åˆ†æã€‘(250-300å­—)
                    - ç»™å‡ºåˆ©ç‡æ•æ„Ÿæ€§ç¼ºå£åˆ†æç»“æœ
                    - åˆ†æåˆ©ç‡ä¸Šå‡/ä¸‹é™å¯¹å‡€åˆ©æ¯æ”¶å…¥çš„å½±å“
                    - è¯´æ˜åˆ©ç‡é£é™©ç®¡ç†ç­–ç•¥å’Œå¯¹å†²æªæ–½

                    ã€æ®µè½2 - å‡€æ¯å·®ç®¡ç†ã€‘(200-250å­—)
                    - åˆ†ææŠ¥å‘ŠæœŸå†…å‡€æ¯å·®å˜åŒ–åŠåŸå› 
                    - è¯´æ˜èµ„äº§ç«¯å’Œè´Ÿå€ºç«¯çš„å®šä»·ç­–ç•¥è°ƒæ•´
                    - å±•æœ›å‡€æ¯å·®èµ°åŠ¿

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®åˆ©ç‡æ•æ„Ÿæ€§ç¼ºå£åˆ†å¸ƒå›¾
                    """,
                    estimated_word_count=500
                ),
                SubSection(
                    sub_section_title="ï¼ˆäºŒï¼‰äº¤æ˜“è´¦æˆ·å¸‚åœºé£é™©",
                    description="è¯„ä¼°äº¤æ˜“æ€§é‡‘èèµ„äº§é¢ä¸´çš„å¸‚åœºä»·æ ¼æ³¢åŠ¨é£é™©",
                    writing_guidance="""
                    ã€æ®µè½1 - é£é™©æ•å£ã€‘(200-250å­—)
                    - ç»™å‡ºäº¤æ˜“æ€§é‡‘èèµ„äº§è§„æ¨¡å’Œç»“æ„
                    - åˆ†æå€ºåˆ¸æŠ•èµ„çš„ä¹…æœŸå’Œå‡¸æ€§é£é™©
                    - è¯´æ˜æƒç›Šç±»æŠ•èµ„çš„å¸‚åœºé£é™©æ•å£

                    ã€æ®µè½2 - é£é™©ç®¡ç†ã€‘(150-200å­—)
                    - ä»‹ç»å¸‚åœºé£é™©é™é¢ç®¡ç†ä½“ç³»
                    - è¯´æ˜æ­¢æŸæœºåˆ¶å’Œé£é™©ç›‘æ§æªæ–½
                    - åˆ†ææŠ•èµ„ç»„åˆè°ƒæ•´ç­–ç•¥
                    """,
                    estimated_word_count=400
                ),
                SubSection(
                    sub_section_title="ï¼ˆä¸‰ï¼‰æµåŠ¨æ€§é£é™©",
                    description="è¯„ä¼°é“¶è¡Œçš„æµåŠ¨æ€§çŠ¶å†µå’Œèèµ„èƒ½åŠ›",
                    writing_guidance="""
                    ã€æ®µè½1 - æµåŠ¨æ€§æŒ‡æ ‡åˆ†æã€‘(250-300å­—)
                    - ç»™å‡ºæµåŠ¨æ€§è¦†ç›–ç‡ï¼ˆLCRï¼‰ã€å‡€ç¨³å®šèµ„é‡‘æ¯”ä¾‹ï¼ˆNSFRï¼‰ç­‰ç›‘ç®¡æŒ‡æ ‡
                    - åˆ†ææµåŠ¨æ€§æ¯”ä¾‹çš„å˜åŒ–è¶‹åŠ¿
                    - è¯´æ˜ä¼˜è´¨æµåŠ¨æ€§èµ„äº§å‚¨å¤‡æƒ…å†µ

                    ã€æ®µè½2 - èèµ„èƒ½åŠ›è¯„ä¼°ã€‘(200-250å­—)
                    - åˆ†æèèµ„æ¸ é“çš„å¤šå…ƒåŒ–ç¨‹åº¦
                    - è¯´æ˜åŒä¸šèèµ„ã€å€ºåˆ¸å‘è¡Œç­‰èèµ„èƒ½åŠ›
                    - è¯„ä¼°èèµ„æˆæœ¬å’ŒæœŸé™ç»“æ„

                    ã€æ®µè½3 - åº”æ€¥ç®¡ç†ã€‘(100-150å­—)
                    - è¯´æ˜æµåŠ¨æ€§é£é™©é¢„è­¦å’Œåº”æ€¥é¢„æ¡ˆ
                    - æè¿°å‹åŠ›æµ‹è¯•æƒ…å†µ

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®æµåŠ¨æ€§æŒ‡æ ‡è¶‹åŠ¿å›¾
                    """,
                    estimated_word_count=600
                ),
            ]
        ),

        Section(
            title="äº”ã€æ“ä½œé£é™©ä¸åˆè§„é£é™©åˆ†æ",
            description="è¯„ä¼°å†…éƒ¨æµç¨‹ã€äººå‘˜ã€ç³»ç»Ÿå’Œå¤–éƒ¨äº‹ä»¶å¸¦æ¥çš„æ“ä½œé£é™©ï¼Œä»¥åŠåˆè§„ç®¡ç†æƒ…å†µ",
            writing_guidance="é‡‡ç”¨'é£é™©è¯†åˆ«-äº‹ä»¶åˆ†æ-ç®¡ç†æªæ–½'çš„ç»“æ„ï¼Œæ—¢è¦æœ‰æ¡ˆä¾‹æ”¯æ’‘ï¼Œä¹Ÿè¦ä½“ç°ç³»ç»Ÿæ€§ç®¡ç†æ€ç»´ã€‚",
            content_requirements="éœ€è¦åŒ…å«ï¼š1) æ“ä½œé£é™©äº‹ä»¶æƒ…å†µ 2) ä¿¡æ¯ç§‘æŠ€é£é™©çŠ¶å†µ 3) å†…æ§åˆè§„æ£€æŸ¥å‘ç° 4) åæ´—é’±ä¸æ¶ˆè´¹è€…ä¿æŠ¤æƒ…å†µ",
            visual_elements=False,
            estimated_words=1200,
            writing_priority="medium",
            subsections=[
                SubSection(
                    sub_section_title="ï¼ˆä¸€ï¼‰æ“ä½œé£é™©äº‹ä»¶",
                    description="åˆ†ææŠ¥å‘ŠæœŸå†…æ“ä½œé£é™©äº‹ä»¶æƒ…å†µ",
                    writing_guidance="""
                    ã€æ®µè½1 - äº‹ä»¶ç»Ÿè®¡ã€‘(150-200å­—)
                    - ç»™å‡ºæŠ¥å‘ŠæœŸå†…æ“ä½œé£é™©äº‹ä»¶æ•°é‡å’ŒæŸå¤±é‡‘é¢
                    - åˆ†æäº‹ä»¶ç±»å‹åˆ†å¸ƒï¼ˆå†…éƒ¨æ¬ºè¯ˆã€å¤–éƒ¨æ¬ºè¯ˆã€æ‰§è¡Œäº¤ä»˜ç­‰ï¼‰
                    - è¯´æ˜é‡å¤§æ“ä½œé£é™©äº‹ä»¶æƒ…å†µ

                    ã€æ®µè½2 - ç®¡ç†æ”¹è¿›ã€‘(150-200å­—)
                    - è¯´æ˜é’ˆå¯¹äº‹ä»¶æš´éœ²é—®é¢˜çš„æ•´æ”¹æªæ–½
                    - æè¿°æ“ä½œé£é™©ç®¡ç†ä½“ç³»å®Œå–„æƒ…å†µ
                    """,
                    estimated_word_count=400
                ),
                SubSection(
                    sub_section_title="ï¼ˆäºŒï¼‰ä¿¡æ¯ç§‘æŠ€é£é™©",
                    description="è¯„ä¼°ä¿¡æ¯ç³»ç»Ÿå®‰å…¨å’Œç§‘æŠ€é£é™©çŠ¶å†µ",
                    writing_guidance="""
                    ã€æ®µè½1 - ç³»ç»Ÿè¿è¡Œæƒ…å†µã€‘(200-250å­—)
                    - è¯´æ˜æ ¸å¿ƒç³»ç»Ÿè¿è¡Œç¨³å®šæ€§
                    - åˆ†æä¿¡æ¯å®‰å…¨äº‹ä»¶å’Œç½‘ç»œæ”»å‡»é˜²èŒƒæƒ…å†µ
                    - è¯„ä¼°ä¸šåŠ¡è¿ç»­æ€§ä¿éšœèƒ½åŠ›

                    ã€æ®µè½2 - æ•°å­—åŒ–è½¬å‹é£é™©ã€‘(150-200å­—)
                    - åˆ†ææ•°å­—åŒ–è½¬å‹å¸¦æ¥çš„æ–°å‹é£é™©
                    - è¯´æ˜æ•°æ®æ²»ç†å’Œéšç§ä¿æŠ¤æƒ…å†µ
                    """,
                    estimated_word_count=400
                ),
                SubSection(
                    sub_section_title="ï¼ˆä¸‰ï¼‰åˆè§„é£é™©ä¸ç›‘ç®¡æ£€æŸ¥",
                    description="åˆ†æåˆè§„ç®¡ç†å’Œç›‘ç®¡æ£€æŸ¥æƒ…å†µ",
                    writing_guidance="""
                    ã€æ®µè½1 - ç›‘ç®¡æ£€æŸ¥ã€‘(150-200å­—)
                    - è¯´æ˜æŠ¥å‘ŠæœŸå†…ç›‘ç®¡æ£€æŸ¥å’Œå¤„ç½šæƒ…å†µ
                    - åˆ†ææ£€æŸ¥å‘ç°çš„ä¸»è¦é—®é¢˜

                    ã€æ®µè½2 - å†…æ§åˆè§„ã€‘(150-200å­—)
                    - è¯´æ˜å†…éƒ¨å®¡è®¡å‘ç°çš„ä¸»è¦é—®é¢˜
                    - æè¿°åæ´—é’±ã€æ¶ˆè´¹è€…æƒç›Šä¿æŠ¤ç­‰åˆè§„é¢†åŸŸæƒ…å†µ
                    - è¯´æ˜æ•´æ”¹è½å®è¿›å±•
                    """,
                    estimated_word_count=400
                ),
            ]
        ),

        Section(
            title="å…­ã€èµ„æœ¬ç®¡ç†ä¸å…¶ä»–é£é™©",
            description="è¯„ä¼°èµ„æœ¬å……è¶³çŠ¶å†µã€å£°èª‰é£é™©å’Œæˆ˜ç•¥é£é™©æƒ…å†µ",
            writing_guidance="é‡‡ç”¨ç»¼åˆè¯„ä¼°çš„è§†è§’ï¼Œå°†èµ„æœ¬ç®¡ç†ä¸å…¶ä»–é£é™©ç»Ÿç­¹è€ƒè™‘ï¼Œä½“ç°å…¨é¢é£é™©ç®¡ç†ç†å¿µã€‚",
            content_requirements="éœ€è¦åŒ…å«ï¼š1) èµ„æœ¬å……è¶³ç‡åŠå„çº§èµ„æœ¬æƒ…å†µ 2) èµ„æœ¬è§„åˆ’å’Œè¡¥å……è®¡åˆ’ 3) å£°èª‰é£é™©äº‹ä»¶å’Œç®¡ç† 4) æˆ˜ç•¥æ‰§è¡Œé£é™©",
            visual_elements=True,
            estimated_words=1000,
            writing_priority="medium",
            subsections=[
                SubSection(
                    sub_section_title="ï¼ˆä¸€ï¼‰èµ„æœ¬å……è¶³çŠ¶å†µ",
                    description="è¯„ä¼°èµ„æœ¬å……è¶³æ°´å¹³å’Œèµ„æœ¬è§„åˆ’æƒ…å†µ",
                    writing_guidance="""
                    ã€æ®µè½1 - èµ„æœ¬æŒ‡æ ‡ã€‘(200-250å­—)
                    - ç»™å‡ºæ ¸å¿ƒä¸€çº§èµ„æœ¬å……è¶³ç‡ã€ä¸€çº§èµ„æœ¬å……è¶³ç‡ã€èµ„æœ¬å……è¶³ç‡
                    - åˆ†æå„çº§èµ„æœ¬çš„æ„æˆå’Œå˜åŒ–
                    - è¯„ä¼°ä¸ç›‘ç®¡è¦æ±‚çš„ç¼“å†²ç©ºé—´

                    ã€æ®µè½2 - èµ„æœ¬è§„åˆ’ã€‘(150-200å­—)
                    - è¯´æ˜èµ„æœ¬è¡¥å……è®¡åˆ’å’Œè¿›å±•
                    - åˆ†æå†…æºæ€§èµ„æœ¬ç§¯ç´¯èƒ½åŠ›
                    - è¯„ä¼°é£é™©åŠ æƒèµ„äº§å¢é•¿å¯¹èµ„æœ¬çš„æ¶ˆè€—

                    ã€å¯è§†åŒ–å»ºè®®ã€‘
                    - å»ºè®®é…ç½®èµ„æœ¬å……è¶³ç‡å˜åŒ–è¶‹åŠ¿å›¾
                    """,
                    estimated_word_count=450
                ),
                SubSection(
                    sub_section_title="ï¼ˆäºŒï¼‰å£°èª‰é£é™©ä¸æˆ˜ç•¥é£é™©",
                    description="è¯„ä¼°å£°èª‰é£é™©äº‹ä»¶å’Œæˆ˜ç•¥æ‰§è¡Œé£é™©",
                    writing_guidance="""
                    ã€æ®µè½1 - å£°èª‰é£é™©ã€‘(150-200å­—)
                    - è¯´æ˜æŠ¥å‘ŠæœŸå†…èˆ†æƒ…äº‹ä»¶å’Œåª’ä½“å…³æ³¨æƒ…å†µ
                    - åˆ†æè‚¡æƒæ‹å–ç­‰äº‹ä»¶å¯¹å£°èª‰çš„å½±å“
                    - æè¿°å£°èª‰é£é™©ç®¡ç†æªæ–½

                    ã€æ®µè½2 - æˆ˜ç•¥æ‰§è¡Œé£é™©ã€‘(150-200å­—)
                    - è¯„ä¼°"å››ä¸ªé“¶è¡Œ"æˆ˜ç•¥æ‰§è¡Œè¿›å±•
                    - åˆ†æ"ä¸‰äº”"è§„åˆ’å¼€å±€æƒ…å†µ
                    - è¯†åˆ«æˆ˜ç•¥æ‰§è¡Œä¸­çš„é£é™©å’ŒæŒ‘æˆ˜
                    """,
                    estimated_word_count=400
                ),
            ]
        ),

        Section(
            title="ä¸ƒã€ç»“è®ºä¸å»ºè®®",
            description="æ€»ç»“æŠ¥å‘ŠæœŸå†…çš„ç»è¥ä¸é£é™©çŠ¶å†µï¼Œæå‡ºé’ˆå¯¹æ€§çš„ç®¡ç†å»ºè®®",
            writing_guidance="é‡‡ç”¨'æ€»ç»“è¯„ä»·-åˆ†ç±»å»ºè®®'çš„ç»“æ„ã€‚æ€»ç»“è¦è¨€ç®€æ„èµ…ï¼Œå»ºè®®è¦å…·ä½“å¯æ“ä½œï¼ŒæŒ‰é‡è¦æ€§åˆ†ç±»å‘ˆç°ã€‚",
            content_requirements="éœ€è¦åŒ…å«ï¼š1) ç»è¥å’Œé£é™©çŠ¶å†µçš„æ€»ä½“è¯„ä»· 2) é£é™©ç®¡ç†å»ºè®® 3) ä¸šåŠ¡å‘å±•å»ºè®® 4) èµ„æœ¬ä¸æµåŠ¨æ€§ç®¡ç†å»ºè®®",
            visual_elements=False,
            estimated_words=1800,
            writing_priority="high",
            subsections=[
                SubSection(
                    sub_section_title="æ€»ä½“è¯„ä»·",
                    description="å¯¹æŠ¥å‘ŠæœŸå†…é“¶è¡Œç»è¥å’Œé£é™©çŠ¶å†µè¿›è¡Œæ€»ä½“è¯„ä»·",
                    writing_guidance="""
                    ã€æ®µè½1 - ç»¼åˆè¯„ä»·ã€‘(250-300å­—)
                    - æ¦‚æ‹¬é“¶è¡Œåœ¨2025å¹´ç¬¬ä¸€å­£åº¦çš„æ€»ä½“è¡¨ç°
                    - æ€»ç»“ç»è¥äº®ç‚¹ï¼šè§„æ¨¡ç¨³å¥å¢é•¿ã€æˆ˜ç•¥ç¨³æ­¥æ¨è¿›ã€é£é™©æ€»ä½“å¯æ§
                    - æŒ‡å‡ºé¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼šå‡€æ¯å·®æ‰¿å‹ã€èµ„äº§è´¨é‡ç®¡ç†å‹åŠ›ã€åŒºåŸŸç»æµé£é™©
                    - å¯¹æ•´ä½“é£é™©æ°´å¹³ä½œå‡ºåˆ¤æ–­
                    """,
                    estimated_word_count=300
                ),
                SubSection(
                    sub_section_title="ï¼ˆä¸€ï¼‰ä¿¡ç”¨é£é™©ç®¡ç†å»ºè®®",
                    description="å›´ç»•ä¿¡ç”¨é£é™©é˜²æ§æå‡ºç®¡ç†å»ºè®®",
                    writing_guidance="""
                    ã€å»ºè®®1 - èµ„äº§è´¨é‡ç®¡æ§ã€‘(150-180å­—)
                    - å›´ç»•ä¸è‰¯è´·æ¬¾"æ§æ–°æ¸…æ—§"æå‡ºå»ºè®®
                    - å¼ºåŒ–è´·åç®¡ç†å’Œé£é™©é¢„è­¦

                    ã€å»ºè®®2 - é‡ç‚¹é¢†åŸŸé£é™©åŒ–è§£ã€‘(150-180å­—)
                    - å›´ç»•æˆ¿åœ°äº§ã€å¹³å°ç±»è´·æ¬¾é£é™©å¤„ç½®æå‡ºå»ºè®®
                    - åŠ å¼ºè¡Œä¸šå’Œå®¢æˆ·é›†ä¸­åº¦ç®¡ç†
                    """,
                    estimated_word_count=350
                ),
                SubSection(
                    sub_section_title="ï¼ˆäºŒï¼‰ä¸šåŠ¡å‘å±•å»ºè®®",
                    description="å›´ç»•ä¸»è¥ä¸šåŠ¡å‘å±•å’Œç›ˆåˆ©èƒ½åŠ›æå‡æå‡ºå»ºè®®",
                    writing_guidance="""
                    ã€å»ºè®®1 - æ·±åŒ–æˆ˜ç•¥æ‰§è¡Œã€‘(150-180å­—)
                    - å›´ç»•"å››ä¸ªé“¶è¡Œ"æˆ˜ç•¥è½åœ°æå‡ºå»ºè®®
                    - åŠ å¿«ç‰¹è‰²åŒ–ã€å·®å¼‚åŒ–ç»è¥

                    ã€å»ºè®®2 - æ”¶å…¥ç»“æ„ä¼˜åŒ–ã€‘(150-180å­—)
                    - å›´ç»•éæ¯æ”¶å…¥æå‡æå‡ºå»ºè®®
                    - åŠ å¼ºæˆæœ¬ç²¾ç»†åŒ–ç®¡ç†

                    ã€å»ºè®®3 - æ•°å­—åŒ–è½¬å‹ã€‘(150-180å­—)
                    - å›´ç»•é‡‘èç§‘æŠ€èµ‹èƒ½ä¸šåŠ¡å‘å±•æå‡ºå»ºè®®
                    - æå‡çº¿ä¸ŠåŒ–ã€æ™ºèƒ½åŒ–æœåŠ¡èƒ½åŠ›
                    """,
                    estimated_word_count=500
                ),
                SubSection(
                    sub_section_title="ï¼ˆä¸‰ï¼‰èµ„æœ¬ä¸æµåŠ¨æ€§ç®¡ç†å»ºè®®",
                    description="å›´ç»•èµ„æœ¬å……è¶³å’ŒæµåŠ¨æ€§ç®¡ç†æå‡ºå»ºè®®",
                    writing_guidance="""
                    ã€å»ºè®®1 - èµ„æœ¬è§„åˆ’ã€‘(150-180å­—)
                    - å›´ç»•èµ„æœ¬è¡¥å……æ¸ é“æ‹“å±•æå‡ºå»ºè®®
                    - ä¼˜åŒ–é£é™©åŠ æƒèµ„äº§ç®¡ç†

                    ã€å»ºè®®2 - æµåŠ¨æ€§ç®¡ç†ã€‘(150-180å­—)
                    - å›´ç»•è´Ÿå€ºç»“æ„ä¼˜åŒ–æå‡ºå»ºè®®
                    - åŠ å¼ºæµåŠ¨æ€§å‚¨å¤‡å’Œåº”æ€¥ç®¡ç†
                    """,
                    estimated_word_count=350
                ),
                SubSection(
                    sub_section_title="ï¼ˆå››ï¼‰é£é™©ç®¡ç†ä½“ç³»å»ºè®¾å»ºè®®",
                    description="å›´ç»•å…¨é¢é£é™©ç®¡ç†èƒ½åŠ›æå‡æå‡ºå»ºè®®",
                    writing_guidance="""
                    ã€å»ºè®®1 - é£é™©æ²»ç†å®Œå–„ã€‘(150-180å­—)
                    - å›´ç»•é£é™©åå¥½å’Œé™é¢ç®¡ç†æå‡ºå»ºè®®
                    - å¼ºåŒ–ä¸‰é“é˜²çº¿ååŒ

                    ã€å»ºè®®2 - é£é™©å·¥å…·åº”ç”¨ã€‘(150-180å­—)
                    - å›´ç»•é£é™©è®¡é‡å’Œæ¨¡å‹å»ºè®¾æå‡ºå»ºè®®
                    - åŠ å¼ºå‹åŠ›æµ‹è¯•å’Œæƒ…æ™¯åˆ†æ
                    """,
                    estimated_word_count=350
                ),
            ]
        ),
    ]
)

# ========== æµ‹è¯•å‡½æ•° ==========

async def test_document_writing_graph():
    """
    æµ‹è¯•å®Œæ•´çš„ Document Writing Graph

    æµç¨‹ï¼š
    1. åˆ›å»ºåˆå§‹ state
    2. ç¼–è¯‘ Main Graph
    3. æ‰§è¡Œ graph
    4. éªŒè¯ç»“æœ
    """
    logger.info("\n" + "="*80)
    logger.info("å¼€å§‹æµ‹è¯• Document Writing Graph")
    logger.info("="*80 + "\n")

    # === 1. å‡†å¤‡æµ‹è¯•æ•°æ® ===
    logger.info("ğŸ“‹ [1/5] å‡†å¤‡æµ‹è¯•æ•°æ®...")

    # è®¡ç®—ç›®æ ‡æ€»å­—æ•°
    target_length = document_outline.estimated_total_words

    logger.info(f"  â†³ æ–‡æ¡£æ ‡é¢˜: {document_outline.title}")
    logger.info(f"  â†³ ç« èŠ‚æ•°é‡: {len(document_outline.sections)}")
    logger.info(f"  â†³ ç›®æ ‡æ€»å­—æ•°: {target_length}")
    logger.info(f"  â†³ å†™ä½œé£æ ¼: {document_outline.writing_style}")
    logger.info(f"  â†³ è¯­è¨€: {document_outline.language}\n")

    # === 2. åˆ›å»ºåˆå§‹çŠ¶æ€ ===
    logger.info("ğŸ”§ [2/5] åˆ›å»ºåˆå§‹çŠ¶æ€...")

    initial_state: DocumentState = {
        "chat_id": "test-chat-001",
        "document_id": "test-doc-001",
        "document_outline": document_outline,
    }

    logger.info("  âœ“ åˆå§‹çŠ¶æ€åˆ›å»ºå®Œæˆ\n")

    # === 3. ç¼–è¯‘ Main Graph ===
    logger.info("ğŸ—ï¸  [3/5] ç¼–è¯‘ Main Graph...")

    try:
        main_graph = create_main_graph()
        logger.info("  âœ“ Main Graph ç¼–è¯‘æˆåŠŸ\n")
    except Exception as e:
        logger.error(f"  âŒ Main Graph ç¼–è¯‘å¤±è´¥: {e}")
        raise

    # === 4. æ‰§è¡Œ Graph ===
    logger.info("ğŸš€ [4/5] æ‰§è¡Œ Document Writing Graph...")
    logger.info("  (è¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼Œè¯·è€å¿ƒç­‰å¾…...)\n")

    import time
    start_time = time.time()

    try:
        # æ‰§è¡Œ graph
        result = await main_graph.ainvoke(initial_state)

        end_time = time.time()
        execution_time = end_time - start_time

        logger.info(f"\n  âœ“ Graph æ‰§è¡Œå®Œæˆ (è€—æ—¶: {execution_time:.2f}ç§’)\n")

    except Exception as e:
        logger.error(f"  âŒ Graph æ‰§è¡Œå¤±è´¥: {e}", exc_info=True)
        raise

    # === 5. éªŒè¯ç»“æœ ===
    logger.info("âœ… [5/5] éªŒè¯ç»“æœ...")

    try:
        # æ£€æŸ¥ completed_chapters
        assert "completed_chapters" in result, "ç¼ºå°‘ completed_chapters"
        completed_chapters = result["completed_chapters"]
        expected_count = len(document_outline.sections)
        logger.info(f"  âœ“ å®Œæˆç« èŠ‚æ•°: {len(completed_chapters)}/{expected_count}")

        # æ£€æŸ¥æ‰€æœ‰ç« èŠ‚éƒ½å®Œæˆ
        expected_chapter_ids = set(range(1, expected_count + 1))
        actual_chapter_ids = set(completed_chapters.keys())
        assert expected_chapter_ids == actual_chapter_ids, f"ç« èŠ‚IDä¸åŒ¹é…: æœŸæœ› {expected_chapter_ids}, å®é™… {actual_chapter_ids}"

        # æ£€æŸ¥æ¯ä¸ªç« èŠ‚çš„ç»“æ„
        for ch_id, ch_data in completed_chapters.items():
            assert "content" in ch_data, f"ç« èŠ‚ {ch_id} ç¼ºå°‘ content"
            assert "metadata" in ch_data, f"ç« èŠ‚ {ch_id} ç¼ºå°‘ metadata"
            logger.info(f"  âœ“ ç« èŠ‚ {ch_id}: {len(ch_data['content'])} å­—ç¬¦, è¯„åˆ†: {ch_data['metadata'].get('final_score', 'N/A')}")

        # æ£€æŸ¥ document_metadata
        assert "document_metadata" in result, "ç¼ºå°‘ document_metadata"
        metadata = result["document_metadata"]
        logger.info(f"  âœ“ æ€»å­—æ•°: {metadata.get('total_words', 0)}")
        logger.info(f"  âœ“ å¹³å‡è¯„åˆ†: {metadata.get('avg_score', 0)}")

        # æ£€æŸ¥ document (æ•´åˆåæ–‡æ¡£)
        assert "document" in result, "ç¼ºå°‘ document"
        document = result["document"]
        assert len(document) > 0, "document ä¸ºç©º"
        logger.info(f"  âœ“ æœ€ç»ˆæ–‡æ¡£é•¿åº¦: {len(document)} å­—ç¬¦")

        # æ£€æŸ¥ document_review
        assert "document_review" in result, "ç¼ºå°‘ document_review"
        review = result["document_review"]
        logger.info(f"  âœ“ å®¡æŸ¥çŠ¶æ€: {review.get('status', 'N/A')}")
        logger.info(f"  âœ“ æ•´ä½“è¯„ä¼°: {review.get('overall_assessment', 'N/A')}")

        logger.info("\n" + "="*80)
        logger.success("âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼")
        logger.info("="*80 + "\n")

        # === 6. è¾“å‡ºæœ€ç»ˆæ–‡æ¡£é¢„è§ˆ ===
        logger.info("ğŸ“„ æœ€ç»ˆæ–‡æ¡£é¢„è§ˆ (å‰500å­—ç¬¦):\n")
        logger.info("-"*80)
        logger.info(document[:500] + "...\n")
        logger.info("-"*80 + "\n")

        return result

    except AssertionError as e:
        logger.error(f"  âŒ éªŒè¯å¤±è´¥: {e}")
        raise
    except Exception as e:
        logger.error(f"  âŒ éªŒè¯è¿‡ç¨‹å‡ºé”™: {e}", exc_info=True)
        raise


async def test_individual_nodes():
    """
    æµ‹è¯•å„ä¸ªç‹¬ç«‹èŠ‚ç‚¹

    ç”¨äºè°ƒè¯•å’ŒéªŒè¯å•ä¸ªèŠ‚ç‚¹çš„åŠŸèƒ½
    """
    logger.info("\n" + "="*80)
    logger.info("å¼€å§‹æµ‹è¯•ç‹¬ç«‹èŠ‚ç‚¹")
    logger.info("="*80 + "\n")

    from app.agents.core.publisher.writing.nodes import (
        chapter_dispatcher,
        chapter_aggregator,
        document_integrator,
        document_reviewer
    )

    # åˆ›å»ºåŸºç¡€ state
    base_state: DocumentState = {
        "chat_id": "test-chat-002",
        "document_id": "test-doc-002",
        "document_outline": document_outline,
        "writer_role": "æŠ€æœ¯åˆ†æå¸ˆ",
        "writer_profile": "ä¸“æ³¨äºAIå’Œç§‘æŠ€é¢†åŸŸçš„èµ„æ·±åˆ†æå¸ˆ",
        "writing_principles": ["å‡†ç¡®æ€§", "å®¢è§‚æ€§", "å‰ç»æ€§"],
        "completed_chapters": {},
        "document_metadata": {},
        "document_review": {},
        "document": "",
    }

    # === æµ‹è¯• 1: chapter_dispatcher ===
    logger.info("ğŸ§ª æµ‹è¯• chapter_dispatcher...")
    try:
        dispatcher_result = chapter_dispatcher(base_state)
        logger.info(f"  âœ“ dispatcher è¿”å›ç±»å‹: {type(dispatcher_result)}")
        logger.success("  âœ“ chapter_dispatcher æµ‹è¯•é€šè¿‡\n")
    except Exception as e:
        logger.error(f"  âŒ chapter_dispatcher æµ‹è¯•å¤±è´¥: {e}\n")

    # === æµ‹è¯• 2: chapter_aggregator ===
    logger.info("ğŸ§ª æµ‹è¯• chapter_aggregator...")
    try:
        # æ¨¡æ‹Ÿå·²å®Œæˆçš„ç« èŠ‚ (æ–°ç»“æ„ï¼Œå­—æ®µåä¸ merger_node ä¸€è‡´)
        aggregator_state = {
            **base_state,
            "completed_chapters": {
                1: {
                    "content": "# ç¬¬ä¸€ç« \n\nè¿™æ˜¯æµ‹è¯•å†…å®¹...",
                    "metadata": {
                        "chapter_id": 1,
                        "chapter_title": "ç¬¬ä¸€ç« ",
                        "word_count": 1200,
                        "revision_count": 1,
                        "final_score": 85,
                        "final_status": "pass",
                        "writer_role": "æŠ€æœ¯åˆ†æå¸ˆ",
                    }
                },
                2: {
                    "content": "# ç¬¬äºŒç« \n\nè¿™æ˜¯æµ‹è¯•å†…å®¹...",
                    "metadata": {
                        "chapter_id": 2,
                        "chapter_title": "ç¬¬äºŒç« ",
                        "word_count": 1300,
                        "revision_count": 0,
                        "final_score": 88,
                        "final_status": "pass",
                        "writer_role": "æŠ€æœ¯åˆ†æå¸ˆ",
                    }
                }
            }
        }

        aggregator_result = chapter_aggregator(aggregator_state)
        logger.info(f"  âœ“ aggregator è¿”å› document_metadata: {aggregator_result.get('document_metadata')}")
        logger.success("  âœ“ chapter_aggregator æµ‹è¯•é€šè¿‡\n")
    except Exception as e:
        logger.error(f"  âŒ chapter_aggregator æµ‹è¯•å¤±è´¥: {e}\n")
        aggregator_result = {}

    # === æµ‹è¯• 3: document_integrator ===
    logger.info("ğŸ§ª æµ‹è¯• document_integrator...")
    try:
        integrator_state = {
            **aggregator_state,
            "document_metadata": aggregator_result.get("document_metadata", {}),
        }

        integrator_result = await document_integrator(integrator_state)
        logger.info(f"  âœ“ integrator è¿”å›æ–‡æ¡£é•¿åº¦: {len(integrator_result.get('document', ''))}")
        logger.success("  âœ“ document_integrator æµ‹è¯•é€šè¿‡\n")
    except Exception as e:
        logger.error(f"  âŒ document_integrator æµ‹è¯•å¤±è´¥: {e}\n")
        integrator_result = {}

    # === æµ‹è¯• 4: document_reviewer ===
    logger.info("ğŸ§ª æµ‹è¯• document_reviewer...")
    try:
        reviewer_state = {
            **integrator_state,
            "document": integrator_result.get("document", "# æµ‹è¯•æ–‡æ¡£\n\nè¿™æ˜¯æµ‹è¯•å†…å®¹..."),
        }

        reviewer_result = await document_reviewer(reviewer_state)
        latest_review = reviewer_result.get('latest_review')
        if latest_review:
            logger.info(f"  âœ“ reviewer è¿”å›å®¡æŸ¥çŠ¶æ€: {latest_review.status}")
            logger.info(f"  âœ“ reviewer è¿”å›è¯„åˆ†: {latest_review.score}")
            logger.info(f"  âœ“ reviewer è¿”å›å»ºè®®æ•°: {len(latest_review.actionable_suggestions)}")
        logger.info(f"  âœ“ reviewer ä¿®è®¢æ¬¡æ•°: {reviewer_result.get('revision_count')}")
        logger.success("  âœ“ document_reviewer æµ‹è¯•é€šè¿‡\n")
    except Exception as e:
        logger.error(f"  âŒ document_reviewer æµ‹è¯•å¤±è´¥: {e}\n")

    logger.info("="*80)
    logger.success("âœ… ç‹¬ç«‹èŠ‚ç‚¹æµ‹è¯•å®Œæˆï¼")
    logger.info("="*80 + "\n")


# ========== ä¸»å‡½æ•° ==========

async def main():
    """ä¸»æµ‹è¯•å…¥å£"""
    logger.info("\n" + "ğŸ¯ " + "="*74)
    logger.info("ğŸ¯  Document Writing Graph æµ‹è¯•å¥—ä»¶")
    logger.info("ğŸ¯ " + "="*74 + "\n")

    # é€‰æ‹©æµ‹è¯•æ¨¡å¼
    test_mode = "full"  # å¯é€‰: "full", "nodes", "both"

    if test_mode in ["full", "both"]:
        logger.info("ğŸ“Œ è¿è¡Œå®Œæ•´ Graph æµ‹è¯•...\n")
        await test_document_writing_graph()

    if test_mode in ["nodes", "both"]:
        logger.info("ğŸ“Œ è¿è¡Œç‹¬ç«‹èŠ‚ç‚¹æµ‹è¯•...\n")
        await test_individual_nodes()

    logger.info("\n" + "ğŸ‰ " + "="*74)
    logger.success("ğŸ‰  æ‰€æœ‰æµ‹è¯•å®Œæˆï¼")
    logger.info("ğŸ‰ " + "="*74 + "\n")


if __name__ == "__main__":
    asyncio.run(main())
